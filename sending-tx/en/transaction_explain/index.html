<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.73">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Conflux Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Conflux Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Conflux" href="/opensearch.xml"><title data-react-helmet="true">Transaction Explanation | Conflux</title><meta data-react-helmet="true" property="og:url" content="https://developer.confluxnetwork.org//sending-tx/en/transaction_explain"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Transaction Explanation | Conflux"><meta data-react-helmet="true" name="description" content="Sending a transaction is the only way to store or update data on the blockchain. Whether it is sending CFX or updating a contract state, it can only be achieved through transactions."><meta data-react-helmet="true" property="og:description" content="Sending a transaction is the only way to store or update data on the blockchain. Whether it is sending CFX or updating a contract state, it can only be achieved through transactions."><meta data-react-helmet="true" name="keywords" content="transaction"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://developer.confluxnetwork.org//sending-tx/en/transaction_explain"><link data-react-helmet="true" rel="alternate" href="https://developer.confluxnetwork.org//sending-tx/en/transaction_explain" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://developer.confluxnetwork.org//sending-tx/en/transaction_explain" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://S86OJPVVGF-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.260e99e2.css">
<link rel="preload" href="/assets/js/styles.77d041ba.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.def2e6c4.js" as="script">
<link rel="preload" href="/assets/js/main.65b77ed7.js" as="script">
<link rel="preload" href="/assets/js/1.a43e9ae6.js" as="script">
<link rel="preload" href="/assets/js/2.f6e86b50.js" as="script">
<link rel="preload" href="/assets/js/3.eabc6fd1.js" as="script">
<link rel="preload" href="/assets/js/1be78505.c1d29a4b.js" as="script">
<link rel="preload" href="/assets/js/122.1ab1d8dd.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.2055ded2.js" as="script">
<link rel="preload" href="/assets/js/17896441.f45a3739.js" as="script">
<link rel="preload" href="/assets/js/d971b5cd.f476e4d6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Conflux Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Conflux Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Conflux Developer</strong></a><a class="navbar__item navbar__link" href="/guides/en/guides_list">Guides</a><a class="navbar__item navbar__link navbar__link--active" href="/">Core</a><a class="navbar__item navbar__link" href="/conflux-doc/docs/EVM-Space/intro_of_evm_space">eSpace</a><a class="navbar__item navbar__link" href="/conflux-doc/docs/json_rpc">APIs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/conflux-chain/conflux-rust" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Conflux Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Conflux Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Conflux Developer</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/guides/en/guides_list">Guides</a></li><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/">Core</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-doc/docs/EVM-Space/intro_of_evm_space">eSpace</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-doc/docs/json_rpc">APIs</a></li><li class="menu__list-item"><a href="https://github.com/conflux-chain/conflux-rust" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Getting started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/introduction/en/conflux_basics">Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/conflux-rust/internal_contract/internal_contract">Internal Contracts</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/introduction/en/conflux_storage">Storage</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/introduction/en/conflux_papers">Papers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/sdks-and-tools/en/conflux_rpcs">Public RPC Endpoints</a></li><li class="menu__list-item"><a href="https://faucet.confluxnetwork.org/" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="0">Testnet Faucet</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Hardfork Hydra(v2.0)</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/v2-hardfork/hydra_overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/v2-hardfork/pos_overview">PoS Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/v2-hardfork/why_pos">Why Introducing PoS</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/v2-hardfork/pos_faqs">PoS FAQs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/v2-hardfork/new_introduced_contracts">V2 InternalContracts</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Hardfork v2.1</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/v2.1-hardfork/hardfork_v2.1.0_overview">Overview</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Run Conflux Node</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/run-a-node/en/how_to_get">Get Conflux Client</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/conflux-doc/docs/installation">Compile from Source</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/conflux-doc/docs/get_started">Run a Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/conflux-doc/docs/independent_chain">Run an Independent Chain</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/conflux-doc/docs/light_node">Run a Light Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/apis/en/node_config_example">Fullnode Config File</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/run-a-node/en/official_bootnodes">Official bootnodes</a></li><li class="menu__list-item"><a href="https://forum.conflux.fun/t/conflux-tethys-gpu-mining-instruction-v1-1-3/3775" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="0">Run a Miner</a></li><li class="menu__list-item"><a href="https://github.com/conflux-fans/archive-tool" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN" tabindex="0">Archivenode snapshot</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Sending Transaction</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/conflux-doc/docs/send_transaction">My First Transaction</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/sending-tx/en/transaction_explain">Transaction Explanation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/sending-tx/en/transaction_stage">Transaction Stages</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/sending-tx/en/why_tx_is_pending">Why Transaction is Pending?</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/sending-tx/en/transaction_send_common_error">Common Errors</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/sending-tx/en/transaction_faqs">FAQs</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">Smart Contract</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/contract/en/contract_introduction">Introduction to Smart Contracts</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist" href="#!">SDKs and Tools</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/sdks-and-tools/en/conflux_sdks">SDKs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/sdks-and-tools/en/conflux_tools">Tools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/sdks-and-tools/en/using_ledger_on_core">Ledger Wallet</a></li></ul></li><li class="menu__list-item"><a href="https://fluent-wallet.zendesk.com/hc/en-001" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN">Fluent Wallet Docs</a></li><li class="menu__list-item"><a href="https://conflux-dev.github.io/conflux-dex-docs/shuttleflow/" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN">Shuttleflow Docs</a></li><li class="menu__list-item"><a href="https://github.com/Conflux-Chain/conflux-rust/blob/master/changelogs/CHANGELOG-1.1.x.md" target="_blank" rel="noopener noreferrer" class="menu__link menuLinkExternal_1OhN">Conflux-rust Changelog</a></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Transaction Explanation</h1></header><div class="markdown"><p>Sending a transaction is the only way to store or update data on the blockchain. Whether it is sending CFX or updating a contract state, it can only be achieved through transactions.
Sending a transaction involves three phases: transaction construction, signing, and sending. Usually, the SDK of each language will provide a packaged method that can be called directly.
However, if you want to know more low-level details, or if you encounter problems when sending transactions, this article may be helpful.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-construct-a-transaction"></a>How to construct a transaction<a class="hash-link" href="#how-to-construct-a-transaction" title="Direct link to heading">#</a></h2><p>To construct a transaction, first, you need to prepare the various fields of the transaction, including:</p><ul><li><code>from</code></li><li><code>to</code></li><li><code>value</code></li><li><code>nonce</code></li><li><code>data</code></li><li><code>gas</code></li><li><code>gasPrice</code></li><li><code>storageLimit</code></li><li><code>chainId</code></li><li><code>epochHeight</code></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="basic-fields"></a>Basic fields<a class="hash-link" href="#basic-fields" title="Direct link to heading">#</a></h3><p><code>from</code>, <code>to</code>, <code>value</code> are basic fields of a transaction that correspond to the <code>originating account</code>, <code>destination account</code>, and <code>amount</code> of the transaction, respectively.</p><p><code>from</code> is fairly easy to determine. You can simply select an external account (non-contract account) address with CFX balance. If the destination account of the transaction is a contract that is <a href="/conflux-rust/internal_contract/internal_contract#sponsorwhitelistcontrol-contract">sponsored</a>, the initiating account does not even require a CFX balance. The balance of the account can be queried through the RPC <a href="/conflux-doc/docs/json_rpc#cfx_getbalance"><code>cfx_getBalance</code></a> RPC method.</p><p><code>to</code> is the destination account of the transaction: if you just want to initiate a CFX transfer, then <code>to</code> can be directly set as the CFX destination account; if you need to change the contract status, <code>to</code> needs to be set as the contract address; if you are deploying a new contract, <code>to</code> is left blank.</p><p><code>value</code> represents the CFX transfer amount of a transaction, and it needs to set an integer with the unit of Drip.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nonce"></a>nonce<a class="hash-link" href="#nonce" title="Direct link to heading">#</a></h3><p><code>nonce</code> is the number of transactions sent by an account. In other words, it is the execution sequence number of transactions sent by an account. It can be queried through the RPC method <a href="/conflux-doc/docs/json_rpc#cfx_getnextnonce"><code>cfx_getNextNonce</code></a>. It has the following characteristics:</p><ol><li>The execution of transactions on the blockchain is in the order of nonce from small to large.</li><li>The initial value of nonce is 0, and the nonce will be increased by 1 for every transaction execution.</li><li>The nonce cannot be reused.</li><li>Nonce cannot be skipped: Assume that the current nonce of an account is n. If the nonce of the transaction is m such that m &gt; n, then the transaction will not be executed until all transactions with nonce &lt; m have been executed.</li><li>After the transaction is sent through the <a href="/conflux-doc/docs/json_rpc#cfx_sendrawtransaction"><code>cfx_sendRawTransaction</code></a> method, it will not be executed immediately. You need to wait for the miner to pack it first. After being packed, it will be executed after a delay of 5 Epochs. After the transaction is executed, the nonce of the account will increase by one.</li></ol><p>Setting the nonce correctly is the key to a smooth transaction execution. Many developers will encounter the situation when the transaction is sent successfully but the execution result (receipt) does not exist. (This suggests that the transaction has not been executed. In most cases, this is due to inadvertently skipping a nonce. A skipped nonce will cause the transaction to be stuck in the transaction pool while awaiting for the previous transaction to be executed.</p><p>When using the SDK to construct a transaction, the nonce does not need to be set manually. The SDK will automatically call <code>cfx_getNonce</code> to obtain the nonce. However, if you want to send transactions in batches, using <code>cfx_getNonce</code> to obtain nonce will cause the reuse of nonce due to the difference in time consumed for transaction send and execution. This means that, if you send multiple transactions through the SDK simultaneously, they will all use the same nonce and only one of them will be executed. (It takes a while for the transaction to be executed after it is sent while sending the transactions doesn&#x27;t require much time to process.) In this case, the developer needs to manage the nonce manually: record the hash of the transaction for each transaction sent, add one to the nonce, and use the updated nonce to construct the transaction.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="fee-related-fields"></a>Fee-related fields<a class="hash-link" href="#fee-related-fields" title="Direct link to heading">#</a></h3><p>After the transactions are sent to the network, they are packaged and executed by miners. Miners will charge a service fee for packaging transactions. This provides incentives for miners to participate in mining and keep the network running.
In the Conflux network, transaction fees are paid in CFX. Fees are specified by the transaction initiator through the <code>gas</code> and <code>gasPrice</code> fields of the transaction.</p><p>The <code>gas</code> field is used to specify the upper limit of the maximum amount of gas that can be paid when a transaction is executed. This can be understood as the <code>limit</code> of the gas that can be consumed by the transaction execution, that is, <code>gasLimit</code>. When a miner executes a transaction, many instructions are executed internally, and different instructions consume different amounts of gas. If the total amount of gas consumed by the transaction exceeds the <code>gasLimit</code> specified by the transaction,  the execution of the transaction will fail. Regular CFX transfer transactions consume <code>21000</code> gas. If interacting with a contract, the gas consumption will depend on the complexity of the contract&#x27;s corresponding bytecode, which can be estimated using the <a href="/conflux-doc/docs/json_rpc#cfx_estimategasandcollateral"><code>cfx_estimateGasAndCollateral</code></a> method. This method will return two gas-related fields:  gasUsed and <code>gasLimit</code>. The gasUsed is the actual amount of gas consumed by the transaction execution at the time of estimation. The <code>gasLimit</code> is the <code>gas</code> value set by transaction sending recommendation (slightly larger than <code>gasUsed</code>) to avoid transaction failure caused by inaccurate (smaller) estimation. Only 25% of the exceeding actual gas (compared to the <code>gasLimit</code> value) will be returned. Therefore it is important to set the transaction <code>gasLimit</code> appropriately.</p><p>To help miners estimate their revenue with reasonable accuracy, at most 25% of the overall <code>gas</code> provided will be refunded. In other words, <strong>the sender needs to pay at least 75% of the gas costs, even if the actual transaction execution consumed much less gas</strong>. Therefore it is important to set the transaction gas limit appropriately.</p><p><code>gasPrice</code> is the amount of CFX that the transaction initiator is willing to pay per gas. The unit is Drip. Thus, the calculation of the upfront gas fee charged for transaction execution is gas * gasPrice. As mentioned before, up to 25% of this fee can be refunded to the sender.</p><p>Miners will pack transactions with higher payouts first. If the network is congested, you can speed up the packing of transactions by increasing the <code>gasPrice</code> value. If the transaction is stuck for some reason, or if you want to speed up the packing of the transaction, try raising <code>gasPrice</code> and resending the transaction with the same nonce. Fullnode provides an RPC method <a href="/conflux-doc/docs/json_rpc#cfx_gasprice"><code>cfx_gasPrice</code></a> that returns a reasonable <code>gasPrice</code> value based on the current network conditions.</p><p>In addition to transaction fees, in the Conflux network, if new storage space is occupied during the transaction&#x27;s execution, some CFX are pledged for that space occupation. The annualized %4 interest generated by the pledged CFX will be paid to the miners to subsidize their storage costs. If the occupied space is released, the pledged CFX will be released and returned to the sender of the transaction. For every 1KB of new space taken, 1 CFX is pledged. The <code>storageLimit</code> field is used to specify the upper limit of the space (in bytes) occupied by a transaction execution. If the transaction tries to occupy more storage than allowed by the storageLimit field, the transaction fails and no CFX is pledged.</p><p>Therefore, when sending a transaction, you need to ensure the sending account has enough balance to pay: <code>value + storageLimit * (10^18/1024) + gas * gasPrice</code>. If the balance is insufficient, instead of failing directly, the transaction may get stuck in the transaction pool and get executed once the sender&#x27;s balance is sufficient. If the transaction is interacting with the contract, and the contract has a sponsor, you only need to ensure that the balance is enough to pay for value.</p><p>The current SDK automatically calls the <code>cfx_estimateGasAndCollateral</code> method to set reasonable <code>gas</code>, <code>storageLimit</code> values for the transaction and the <code>cfx_gasPrice</code> method to set a reasonable <code>gasPrice</code> value. Of course, the users can also specify more reasonable values manually.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="data"></a>data<a class="hash-link" href="#data" title="Direct link to heading">#</a></h3><p>The data field of the transaction can be left blank or set to a hex-encoded byte array. This can be roughly categorized into three situations:</p><ul><li>Regular CFX transfer transaction: The <code>data</code> field is usually blank, but hex-encoded data can be set as a transaction remark or postscript.</li><li>Contract deployment transaction: <code>data</code> needs to be set as the contract&#x27;s bytecode and the parameters of the constructor (if any)</li><li>Contract call transaction: The <code>data</code> field is used to store the input data for the contract to call. The data is usually the contract method and data after parameter abi encoding. (When sending CFX to a contract, the data field is usually left blank)</li></ul><p>Smart contracts are usually written in high-level contract development languages (Solidity, vyper). You can use a compiler to obtain bytecode and abi. SDK will provide abi encoding methods for the encoding of the contract method call (encoding the method name and parameters).</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="other"></a>Other<a class="hash-link" href="#other" title="Direct link to heading">#</a></h3><p><code>chainId</code> is used to identify a chain. The current chainId of the Conflux Tethys network is <code>1029</code>, while that of the Conflux testnet is <code>1</code>. The chainId is included in the transaction mainly to prevent transaction replay attacks.  This field usually does not need to be filled manually. SDK will automatically obtain the current RPC chainId through the <a href="/conflux-doc/docs/json_rpc#cfx_getstatus"><code>cfx_getStatus</code></a> method.</p><p><code>epochHeight</code> is used to specify the target Epoch range for a transaction. Transactions will only be executed in the range of [Te âˆ’ 100000, Te + 100000]. If the Epoch of the current chain exceeds that range, the transaction will be discarded. SDK also sets this field to the current Epoch obtained by the <a href="/conflux-doc/docs/json_rpc#cfx_epochnumber"><code>cfx_epochNumber</code></a> method automatically.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="transaction-encoding-and-signature"></a>Transaction encoding and signature<a class="hash-link" href="#transaction-encoding-and-signature" title="Direct link to heading">#</a></h2><p>After the fields of the transaction are determined, transactions need to be rlp encoded in a specific format, and the encoded keccak256 hash will be signed by the private key of the sending account. Finally, a rawTransaction will be assembled. The rawTransaction can be sent to the Conflux network through the <code>cfx_sendRawTransaction</code> method, awaiting to be packaged and executed by the miners.</p><p>The specific steps are as follows (take js-conflux-sdk as an example):</p><ol><li>Parse each field of the transaction into buffer</li><li>Assemble each field into an array or tuple in the order of <code>(nonce, gasPrice, gas, to, value, storageLimit, epochHeight, chainId, data)</code> and perform rlp encoding.</li><li>Perform the <code>keccak256</code> operation on the encoded result to obtain a hash</li><li>Use the private key of the sending account to perform the ecdsaSign signature operation to the hash obtained in the previous step. After that, r, s, v are obtained.</li><li>Assemble all the information according to <code>((nonce, gasPrice, gas, to, value, storageLimit, epochHeight, chainId, data), v, r, s)</code> and perform rlp encoding.</li><li>Finally, convert the encoded buffer in the previous step into a hex string, and then, you will get a rawTransaction that can be sent directly.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-check-transaction-details-and-status"></a>How to check transaction details and status<a class="hash-link" href="#how-to-check-transaction-details-and-status" title="Direct link to heading">#</a></h2><p>After the transaction is successfully sent, it will first be placed in the transaction pool. When the packaging conditions are met, the transaction will be packaged by the miner into the latest block. At this time, you can query the information and status of the transaction through <a href="/conflux-doc/docs/json_rpc#cfx_gettransactionbyhash"><code>cfx_getTransactionByHash</code></a>.
The <code>status</code> field of the returned result indicates the execution status of the transaction:</p><ul><li><code>null</code>: not executed</li><li><code>0x0</code>: Execution successful</li><li><code>0x1</code>: Execution failed, transaction was reverted</li><li><code>0x2</code>: The transaction was skipped</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;jsonrpc&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2.0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;result&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;blockHash&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x398879d9e7d37e2cc87af268fcd2207a689e2e84986e9251a5343dafca3d93b7&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;chainId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x405&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;contractCreated&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token null keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;data&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;epochHeight&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0xd03609&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;from&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CFX:TYPE.USER:AAKETJH9TKJ5G2K4ZX3KFVB9VKKU8NR956N0EN4FHE&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;gas&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x5208&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;gasPrice&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x2540be400&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;hash&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0xa76efec071e0779785b6653aebb2382a5e460b60a163a1b166df3c8164cec6d9&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;nonce&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0xa08d9&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;r&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x38e661ad41790c069a4795df21eade5ef9605dbcbdfd5dabbb0dc322e833e4c1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;s&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x66ca875464c554261033f4522281d564bdba4f0189d357579dcbf2b1ed98936b&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;status&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;storageLimit&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;to&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CFX:TYPE.USER:AATT0JGE4J70V4H0Z43VJ9M29ZJ7ASNS0YA238MGZC&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;transactionIndex&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;v&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;value&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0xde0b93b7d70bec0&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;15922956697249514502&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>The transaction will not be executed immediately after it&#x27;s packaged, and the transaction&#x27;s <code>status</code> is <code>null</code> at that point. After a delay of 4 Epochs, the status of the transaction would change to <code>0x0</code>, <code>0x1</code>, or <code>0x2</code>. (<code>0x0</code> for success, <code>0x1</code> for failure, and <code>0x2</code> for skip.)</p><p>You can also get the transaction execution receipt through <a href="/conflux-doc/docs/json_rpc#cfx_gettransactionreceipt"><code>cfx_getTransactionReceipt</code></a>. This can only be obtained after the transaction has been executed, otherwise, it will return <code>null</code>. The receipt contains a field <code>outcomeStatus</code> which can also be used to determine whether the transaction is executed successfully: <code>0x0</code> indicates success, others indicate failure.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><div tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;jsonrpc&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;2.0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;result&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;blockHash&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x398879d9e7d37e2cc87af268fcd2207a689e2e84986e9251a5343dafca3d93b7&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;contractCreated&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token null keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;epochNumber&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0xd0360f&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;from&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CFX:TYPE.USER:AAKETJH9TKJ5G2K4ZX3KFVB9VKKU8NR956N0EN4FHE&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;gasCoveredBySponsor&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;gasFee&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0xbefe6f672000&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;gasUsed&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x5208&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;index&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x1&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;logs&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;logsBloom&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;outcomeStatus&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;stateRoot&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x8c05b8eb6b9dc69f2e7bb235621487022e694ce3969202b94e76227673a0b86b&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;storageCollateralized&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0x0&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;storageCoveredBySponsor&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;storageReleased&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;to&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;CFX:TYPE.USER:AATT0JGE4J70V4H0Z43VJ9M29ZJ7ASNS0YA238MGZC&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;transactionHash&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;0xa76efec071e0779785b6653aebb2382a5e460b60a163a1b166df3c8164cec6d9&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;txExecErrorMsg&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token null keyword" style="font-style:italic">null</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token property">&quot;id&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;15922956697249514502&quot;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="how-to-determine-if-a-transaction-is-confirmed"></a>How to determine if a transaction is confirmed<a class="hash-link" href="#how-to-determine-if-a-transaction-is-confirmed" title="Direct link to heading">#</a></h2><p>In the blockchain, a block can be reverted after being executed. Accordingly, a transaction can also be reversed after being executed. The status of the transaction can only be considered final once the block has been confirmed.
There are two ways to determine whether a transaction (block) is confirmed in Conflux:</p><ol><li>If the latest <code>confirmed epochNumber</code> of the network is greater than the epochNumber of the transaction, the transaction is confirmed. By calling <code>cfx_epochNumber</code> method and passing <code>latest_confirmed</code> parameter, you can obtain the latest confirmed <code>epochNumber</code>. epochNumber of the transaction is in its receipt. </li><li>You can obtain a block&#x27;s confirmation risk value by calling the method <a href="/conflux-doc/docs/json_rpc#cfx_getconfirmationriskbyhash"><code>cfx_getConfirmationRiskByHash</code></a>. If <em>risk/MAX_UINT256 is less than 1e-8</em>, the block is confirmed and will not be reverted. The block hash of the transaction can be obtained through <code>cfx_getTransactionByHash</code>.</li></ol><p>In Conflux, usually, a block can be confirmed after 50 epochs (within one minute). If the transaction involves a large amount, you might need to wait for more epochs according to the situation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="reasons-for-transaction-failure"></a>Reasons for transaction failure<a class="hash-link" href="#reasons-for-transaction-failure" title="Direct link to heading">#</a></h2><p>Based on the stage in which the transaction fails, there are three categories of failures:</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rejected-by-rpc"></a>Rejected by RPC<a class="hash-link" href="#rejected-by-rpc" title="Direct link to heading">#</a></h3><p>The sending transaction is directly rejected by RPC. The reason for rejection can be found in the <code>message</code> field of RPC Response.</p><ol><li><code>Invalid parameters: tx&#x27;, &#x27;data&#x27;: &#x27;&quot;Failed imported to deferred pool: Tx with same nonce already inserted. To replace it, you need to specify a gas price &gt; 5</code> The error code indicates that the same nonce has been used in the transaction pool and cannot be reused. However, you can replace an existing transaction by sending a transaction with the same nonce but higher gas price.</li><li><code>&#x27;Invalid parameters: tx&#x27;, &#x27;data&#x27;: &#x27;&quot;Transaction 0x2004b0aea956e8cfad601cd6daad5630c1a95624bad446d1966895973325136c is discarded due to a too stale nonce</code> This indicates that the same nonce used has been used in history and cannot be used again.</li><li><code>Sending transactions to invalid address. The first four bits must be 0x0 (built-in/reserved), 0x1 (user-account), or 0x8 (contract).</code> This indicates that the receiving address of the transaction is wrong.</li><li><code>Transaction {:?} is discarded due to in too distant future</code> This indicates that the transaction is using a nonce that is too large for the account&#x27;s current nonce</li><li><code>tx already exist</code> This indicates that the transaction already exists.</li></ol><p>Sometimes, the <code>data</code> of Response will also contain some error information. ï¼ˆThis field is a hex-encoded string. The parsing method is: hex -&gt; buffer -&gt; UTF8 stringï¼‰</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="stuck-in-the-transaction-pool"></a>Stuck in the transaction pool<a class="hash-link" href="#stuck-in-the-transaction-pool" title="Direct link to heading">#</a></h3><p>The transaction is sent successfully but not be packaged. There are two possible reasons:</p><ol><li>The skipped nonce is used, and the transaction of the previous nonce has not been generated or executed.</li><li>The account sending this transaction does not have enough balance to pay the transaction.</li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="execution-failed"></a>Execution failed<a class="hash-link" href="#execution-failed" title="Direct link to heading">#</a></h3><p>Execution failure is usually due to an error that occurred during the execution process of the contract, which then caused the transaction failure. Such errors are mostly caused by contract execution failures or errors returned when estimating gas cost through the estimate interface.
You can check the specific reason for the transaction failure in the <code>txExecErrorMsg</code> under receipt:</p><ol><li><code>VmError(OutOfGas)</code> The transaction specified gas fee is not enough</li><li><code>VmError(ExceedStorageLimit)</code> The transaction specified upper-limit storage is not enough</li><li><code>NotEnoughCash</code> Insufficient user balance</li><li><code>Vm reverted, Reason provided by the contract: xxxx</code> The contract execution failed with details provided. </li><li><code>VmError(BadInstruction xxxx)</code> Contract deployment failed</li><li><code>Vm reverted, xxxx</code> The contract execution failed with no details provided.</li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="differences-between-conflux-and-ethereum"></a>Differences between Conflux and Ethereum<a class="hash-link" href="#differences-between-conflux-and-ethereum" title="Direct link to heading">#</a></h2><p>Compared to Ethereum <code>155 transaction</code>, transactions through Conflux have several differences:</p><ul><li>Two more fields: <code>storageLimit</code>, and <code>epochNumber</code>.</li><li>The RLP encoding assembly method of the transaction is different. <ol><li>When compute transaction hash the RLP structure is <code>[nonce, gasPrice, gas, to, value, storageLimit, epochHeight, chainId, data]</code></li><li>When assemble rawTx the RLP structure is <code>[[nonce, gasPrice, gas, to, value, storageLimit, epochHeight, chainId, data], v, r, s]</code></li></ol></li><li>The <code>v</code> value signed by ecdsaSign will not be specifically modified in Conflux; while In Ethereum, there will be some special treatments to the v value.</li><li>Finally, while Ethereum nodes directly reject transactions if the sender has insufficient balance, Conflux nodes accept such transactions but only pack them info blocks once the user&#x27;s balance can cover it</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/Conflux-Chain/conflux-developer-site/edit/master/docs/sending-tx/en/sending-tx-ultimate-guide.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/conflux-doc/docs/send_transaction"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« My First Transaction</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/sending-tx/en/transaction_stage"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Transaction Stages Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#how-to-construct-a-transaction" class="table-of-contents__link">How to construct a transaction</a><ul><li><a href="#basic-fields" class="table-of-contents__link">Basic fields</a></li><li><a href="#nonce" class="table-of-contents__link">nonce</a></li><li><a href="#fee-related-fields" class="table-of-contents__link">Fee-related fields</a></li><li><a href="#data" class="table-of-contents__link">data</a></li><li><a href="#other" class="table-of-contents__link">Other</a></li></ul></li><li><a href="#transaction-encoding-and-signature" class="table-of-contents__link">Transaction encoding and signature</a></li><li><a href="#how-to-check-transaction-details-and-status" class="table-of-contents__link">How to check transaction details and status</a></li><li><a href="#how-to-determine-if-a-transaction-is-confirmed" class="table-of-contents__link">How to determine if a transaction is confirmed</a></li><li><a href="#reasons-for-transaction-failure" class="table-of-contents__link">Reasons for transaction failure</a><ul><li><a href="#rejected-by-rpc" class="table-of-contents__link">Rejected by RPC</a></li><li><a href="#stuck-in-the-transaction-pool" class="table-of-contents__link">Stuck in the transaction pool</a></li><li><a href="#execution-failed" class="table-of-contents__link">Execution failed</a></li></ul></li><li><a href="#differences-between-conflux-and-ethereum" class="table-of-contents__link">Differences between Conflux and Ethereum</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Overview</a></li><li class="footer__item"><a href="https://fluentwallet.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Fluent Wallet</a></li><li class="footer__item"><a href="https://confluxscan.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conflux Scan</a></li><li class="footer__item"><a href="https://faucet.confluxnetwork.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Testnet Faucet</a></li><li class="footer__item"><a href="https://evm.fluentwallet.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Space Bridge</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Tools</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.obsidians.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conflux studio</a></li><li class="footer__item"><a href="https://chainide.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ChainIDE</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://bountyv2.confluxnetwork.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bounty</a></li><li class="footer__item"><a href="https://forum.conflux.fun/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li><li class="footer__item"><a href="https://discord.com/invite/aCZkf2C" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Conflux-Chain" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/Conflux_Network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://medium.com/@ConfluxNetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2022 Conflux. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/styles.77d041ba.js"></script>
<script src="/assets/js/runtime~main.def2e6c4.js"></script>
<script src="/assets/js/main.65b77ed7.js"></script>
<script src="/assets/js/1.a43e9ae6.js"></script>
<script src="/assets/js/2.f6e86b50.js"></script>
<script src="/assets/js/3.eabc6fd1.js"></script>
<script src="/assets/js/1be78505.c1d29a4b.js"></script>
<script src="/assets/js/122.1ab1d8dd.js"></script>
<script src="/assets/js/935f2afb.2055ded2.js"></script>
<script src="/assets/js/17896441.f45a3739.js"></script>
<script src="/assets/js/d971b5cd.f476e4d6.js"></script>
</body>
</html>