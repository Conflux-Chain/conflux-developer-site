<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.73">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Conflux Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Conflux Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Conflux" href="/opensearch.xml"><title data-react-helmet="true">0.5.0 | Conflux</title><meta data-react-helmet="true" property="og:url" content="https://developer.conflux-chain.org/conflux-rust/changelogs/CHANGELOG-pre-0.6"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="0.5.0 | Conflux"><meta data-react-helmet="true" name="description" content="Improvements"><meta data-react-helmet="true" property="og:description" content="Improvements"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://developer.conflux-chain.org/conflux-rust/changelogs/CHANGELOG-pre-0.6"><link data-react-helmet="true" rel="alternate" href="https://developer.conflux-chain.org/conflux-rust/changelogs/CHANGELOG-pre-0.6" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://developer.conflux-chain.org/conflux-rust/changelogs/CHANGELOG-pre-0.6" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://S86OJPVVGF-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.260e99e2.css">
<link rel="preload" href="/assets/js/styles.f02bac9f.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.0c2e0f00.js" as="script">
<link rel="preload" href="/assets/js/main.b6bcde51.js" as="script">
<link rel="preload" href="/assets/js/1.23dd2348.js" as="script">
<link rel="preload" href="/assets/js/2.ae109e61.js" as="script">
<link rel="preload" href="/assets/js/3.1b61a224.js" as="script">
<link rel="preload" href="/assets/js/1be78505.3d246e3e.js" as="script">
<link rel="preload" href="/assets/js/116.51813c08.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.a31bc627.js" as="script">
<link rel="preload" href="/assets/js/17896441.9887091a.js" as="script">
<link rel="preload" href="/assets/js/38e73541.1810f943.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Conflux Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Conflux Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Conflux Developer</strong></a><a class="navbar__item navbar__link" href="/guides/en/how_to_use_cfx_faucet">Guides</a><a class="navbar__item navbar__link" href="/">Core</a><a class="navbar__item navbar__link" href="/conflux-doc/docs/EVM-Space/intro_of_evm_space">eSpace</a><a class="navbar__item navbar__link" href="/conflux-doc/docs/json_rpc">APIs</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/conflux-chain/conflux-rust" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="Conflux Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="Conflux Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">Conflux Developer</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/guides/en/how_to_use_cfx_faucet">Guides</a></li><li class="menu__list-item"><a class="menu__link" href="/">Core</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-doc/docs/EVM-Space/intro_of_evm_space">eSpace</a></li><li class="menu__list-item"><a class="menu__link" href="/conflux-doc/docs/json_rpc">APIs</a></li><li class="menu__list-item"><a href="https://github.com/conflux-chain/conflux-rust" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">0.5.0</h1></header><div class="markdown"><p>Improvements</p><ul><li><p>Add fields in Receipt: gas_fee, gas_sponsored, storage_sponsored. Accumulate gas_used in Receipt, not gas_charged.</p></li><li><p>Delay block requests when we cannot process them to avoid wasting network bandwidth.</p></li><li><p>Set block gas limit for Genesis block to 30_000_000.</p></li><li><p>Define gas_used to be transaction gas limit for NotEnoughCash, the same as all other exceptions.</p></li><li><p>Add support for WebSockets in RPC.</p></li><li><p>cfx_gasPrice will return a price with at least 1000000000, i.e. 1GDrip.</p></li><li><p>Move getstatus RPC from test to common, and renamed with cfx_getStatus.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bug-fixes"></a>Bug Fixes<a class="hash-link" href="#bug-fixes" title="Direct link to heading">#</a></h2><ul><li><p>Fix UnexpectedResponse from honest peers that causes peer demotion.</p></li><li><p>Remove some untrue debug assert.</p></li><li><p>Forbidden CALLCODE and DELEGATECALL to internal contracts.</p></li><li><p>RPC now returns the correct rlp size of the block</p></li><li><p>Fix a race condition that may cause optimistic execution to panic.</p></li><li><p>Fill in correct block gas limit value for mining.</p></li><li><p>Fix definitions and logics in transaction early execution error checking.</p></li><li><p>Use block_count - 1 in target difficulty calculation because it&#x27;s the unbiased estimation of exponential distribution parameter (past mining power).</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="improvements"></a>Improvements<a class="hash-link" href="#improvements" title="Direct link to heading">#</a></h2><ul><li><p>Add cfx_getConfirmationRiskByHash RPC to get confirmation risk by block hash.</p></li><li><p>Add getTransactionsFromPool debug RPC to collect transactions in pool.</p></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="040"></a>0.4.0<a class="hash-link" href="#040" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bug-fixes-1"></a>Bug Fixes<a class="hash-link" href="#bug-fixes-1" title="Direct link to heading">#</a></h2><ul><li><p>Fix a potential crash bug in the transaction pool compoenent</p></li><li><p>Stop marking OverlayAccount dirty on read access. This will influnce the state root. </p></li><li><p>Do not mark OverlayAccount dirty in sub_balance 0 for non-existence account.</p></li><li><p>Add missing transaction verifications for invalid block.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="improvements-1"></a>Improvements<a class="hash-link" href="#improvements-1" title="Direct link to heading">#</a></h2><ul><li><p>Improve the transaction address check at RPC</p></li><li><p>Change the test net PoW to use double keccak</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="evm-updates"></a>EVM Updates<a class="hash-link" href="#evm-updates" title="Direct link to heading">#</a></h2><ul><li><p>Decide the storage owner (who is responsible for storage collateral) at the beginning of the transaction. </p></li><li><p>Only check the storage limit and balance for storage collateral at the end of EVM execution. </p></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="032"></a>0.3.2<a class="hash-link" href="#032" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bug-fixes-2"></a>Bug Fixes<a class="hash-link" href="#bug-fixes-2" title="Direct link to heading">#</a></h2><ul><li><p>Fix an issue that GetBlockHashesByEpoch containing blocks before checkpoint may cause the node to crash.</p></li><li><p>Quick fix for possible duplicate block inserted into the consensus worker thread.</p></li></ul><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="030"></a>0.3.0<a class="hash-link" href="#030" title="Direct link to heading">#</a></h1><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="blockchain-core-updates-not-backward-compatible"></a>Blockchain Core Updates (Not Backward Compatible)<a class="hash-link" href="#blockchain-core-updates-not-backward-compatible" title="Direct link to heading">#</a></h2><ul><li><p>Changes the address scheme of Conflux. All normal address now start with 0x1.
All smart contracts address now start with 0x8. Note that your private key will
still work as long as you replace the first character in your hex address with
<code>0x1</code>. For example, if your address is 0x7b5c..., after this update your
address will change to 0x1b5c...</p></li><li><p>Changes the state Merkle root calculation method. Merkle is calculated based
on constructed raw keccak input byte string instead of serialized rlp; checks if
compressed_path starts on the second nibble of a byte; makes sure that with the
constructed keccak input string adversary cannot construct a compressed path to
create a path Merkle of the same value as a node Merkle.</p></li><li><p>Each epoch now has a limit of executing 200 blocks. If there are more than
200 blocks in an epoch. Only the last 200 blocks will be executed. This change
is designed to battle DoS attacks about hiding and generating a lot of blocks
suddenly.</p></li><li><p>Add storage_root support in Conflux MPT. Define storage root as the Merkle
root computed on the account&#x27;s storage subtree root node, ignoring the
compressed path; 2) force the storage root node to existing by setting a
StorageLayout value at the storage node. </p></li></ul><p>You need to use new SDK tools to connect with the main chain, otherwise your
transaction will be rejected as invalid. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="evm-updates-1"></a>EVM Updates<a class="hash-link" href="#evm-updates-1" title="Direct link to heading">#</a></h2><ul><li>Change the gas used in SSTORE operation to 5000 gas, no matter the zero-ness
is changed or not. And we no longer refund gas in releasing storage entry. </li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="rpccli-updates"></a>RPC/CLI Updates<a class="hash-link" href="#rpccli-updates" title="Direct link to heading">#</a></h2><ul><li><p>Change the CLI interface subcommand from <code>debug</code> to <code>local</code>. Its
functionality remains the same.</p></li><li><p>Add a RPC cfx_getSkippedBlocksByEpoch to query skipped blocks of an epoch</p></li><li><p>Add a corresponding CLI interface to query skipped blocks via local RPC</p></li><li><p>Refactor RPC interface now most RPC takes HEX parameters and returns HEX</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="bug-fixes-3"></a>Bug Fixes<a class="hash-link" href="#bug-fixes-3" title="Direct link to heading">#</a></h2><ul><li><p>Fix an issue that may cause the P2P layer to not propagate out-of-era blocks properly</p></li><li><p>Fix an issue that Conflux RPC may return incorrect estimate.</p></li><li><p>Fix an issue that virtual call RPC may fail if the caller does not have enough balance</p></li><li><p>Fix an issue that failing to send a pending request can make a block not received.</p></li><li><p>Fix an issue that not-graph-ready compact blocks are not fully received.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="improvements-2"></a>Improvements<a class="hash-link" href="#improvements-2" title="Direct link to heading">#</a></h2><ul><li>Make the consensus layer to prioritize meaningful blocks first. It will
improve the overall performance in facing of DoS attacks. It will also
prioritize self-mined blocks as a desirable effect.</li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/facebook/docusaurus/edit/master/website/docs/conflux-rust/changelogs/CHANGELOG-pre-0.6.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#bug-fixes" class="table-of-contents__link">Bug Fixes</a></li><li><a href="#improvements" class="table-of-contents__link">Improvements</a></li><li><a href="#bug-fixes-1" class="table-of-contents__link">Bug Fixes</a></li><li><a href="#improvements-1" class="table-of-contents__link">Improvements</a></li><li><a href="#evm-updates" class="table-of-contents__link">EVM Updates</a></li><li><a href="#bug-fixes-2" class="table-of-contents__link">Bug Fixes</a></li><li><a href="#blockchain-core-updates-not-backward-compatible" class="table-of-contents__link">Blockchain Core Updates (Not Backward Compatible)</a></li><li><a href="#evm-updates-1" class="table-of-contents__link">EVM Updates</a></li><li><a href="#rpccli-updates" class="table-of-contents__link">RPC/CLI Updates</a></li><li><a href="#bug-fixes-3" class="table-of-contents__link">Bug Fixes</a></li><li><a href="#improvements-2" class="table-of-contents__link">Improvements</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/">Overview</a></li><li class="footer__item"><a href="https://fluentwallet.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Fluent Wallet</a></li><li class="footer__item"><a href="https://confluxscan.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conflux Scan</a></li><li class="footer__item"><a href="http://faucet.confluxnetwork.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Testnet Faucet</a></li><li class="footer__item"><a href="https://evm.fluentwallet.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Space Bridge</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Tools</h4><ul class="footer__items"><li class="footer__item"><a href="https://www.obsidians.io/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Conflux studio</a></li><li class="footer__item"><a href="https://chainide.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">ChainIDE</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://bountyv2.confluxnetwork.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Bounty</a></li><li class="footer__item"><a href="https://forum.conflux.fun/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Forum</a></li><li class="footer__item"><a href="https://discord.com/invite/aCZkf2C" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Social</h4><ul class="footer__items"><li class="footer__item"><a href="https://github.com/Conflux-Chain" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a href="https://twitter.com/Conflux_Network" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://medium.com/@ConfluxNetwork" target="_blank" rel="noopener noreferrer" class="footer__link-item">Medium</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Â© 2022 Conflux. All Rights Reserved.</div></div></div></footer></div>
<script src="/assets/js/styles.f02bac9f.js"></script>
<script src="/assets/js/runtime~main.0c2e0f00.js"></script>
<script src="/assets/js/main.b6bcde51.js"></script>
<script src="/assets/js/1.23dd2348.js"></script>
<script src="/assets/js/2.ae109e61.js"></script>
<script src="/assets/js/3.1b61a224.js"></script>
<script src="/assets/js/1be78505.3d246e3e.js"></script>
<script src="/assets/js/116.51813c08.js"></script>
<script src="/assets/js/935f2afb.a31bc627.js"></script>
<script src="/assets/js/17896441.9887091a.js"></script>
<script src="/assets/js/38e73541.1810f943.js"></script>
</body>
</html>