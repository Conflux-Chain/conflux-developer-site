(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{151:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return r})),n.d(t,"metadata",(function(){return i})),n.d(t,"toc",(function(){return s})),n.d(t,"default",(function(){return u}));var o=n(3),a=n(7),l=(n(0),n(191)),r={id:"installation",title:"Compile from Source",custom_edit_url:"https://github.com/Conflux-Chain/conflux-doc/edit/master/docs/install.md",keywords:["conflux","install"]},i={unversionedId:"conflux-doc/docs/installation",id:"conflux-doc/docs/installation",isDocsHomePage:!1,title:"Compile from Source",description:"Here is a step by step guide on how to build Conflux from the source code and get a node running.",source:"@site/docs/conflux-doc/docs/install.md",sourceDirName:"conflux-doc/docs",slug:"/conflux-doc/docs/installation",permalink:"/conflux-doc/docs/installation",editUrl:"https://github.com/Conflux-Chain/conflux-doc/edit/master/docs/install.md",version:"current",frontMatter:{id:"installation",title:"Compile from Source",custom_edit_url:"https://github.com/Conflux-Chain/conflux-doc/edit/master/docs/install.md",keywords:["conflux","install"]},sidebar:"docs",previous:{title:"Get Conflux Client",permalink:"/run-a-node/en/how_to_get"},next:{title:"Run a Node",permalink:"/conflux-doc/docs/get_started"}},s=[{value:"Install Build Dependencies",id:"install-build-dependencies",children:[{value:"Linux",id:"linux",children:[]},{value:"OSX",id:"osx",children:[]},{value:"Windows",id:"windows",children:[]}]},{value:"Build from Source Code",id:"build-from-source-code",children:[]},{value:"Install Test Dependencies",id:"install-test-dependencies",children:[]}],c={toc:s};function u(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(l.b)("wrapper",Object(o.a)({},c,n,{components:t,mdxType:"MDXLayout"}),Object(l.b)("p",null,"Here is a step by step guide on how to build Conflux from the source code and get a node running."),Object(l.b)("h2",{id:"install-build-dependencies"},"Install Build Dependencies"),Object(l.b)("p",null,"Conflux requires ",Object(l.b)("strong",{parentName:"p"},"Rust 1.68.0"),", ",Object(l.b)("inlineCode",{parentName:"p"},"clang"),", and ",Object(l.b)("inlineCode",{parentName:"p"},"sqlite")," to build."),Object(l.b)("p",null,"We recommend installing Rust through ",Object(l.b)("a",{parentName:"p",href:"https://www.rustup.rs/"},"rustup"),". If you don't already have ",Object(l.b)("inlineCode",{parentName:"p"},"rustup")," or ",Object(l.b)("inlineCode",{parentName:"p"},"clang"),", you can install them like this:"),Object(l.b)("h3",{id:"linux"},"Linux"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"$ curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh\n$ rustup install 1.68.0\n")),Object(l.b)("p",null,"Other dependencies including ",Object(l.b)("inlineCode",{parentName:"p"},"clang"),", ",Object(l.b)("inlineCode",{parentName:"p"},"cmake (version >= 3.12)")," and ",Object(l.b)("inlineCode",{parentName:"p"},"sqlite (version >= 3.8.3)")," can be installed with:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Ubuntu 18.04:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"# The latest cmake version on Ubuntu 18.04 is 3.10, so you'll need to install it from the Kitware repository.\n$ wget -O - https://apt.kitware.com/keys/kitware-archive-latest.asc 2>/dev/null | gpg --dearmor - | sudo tee /usr/share/keyrings/kitware-archive-keyring.gpg >/dev/null\n$ echo 'deb [signed-by=/usr/share/keyrings/kitware-archive-keyring.gpg] https://apt.kitware.com/ubuntu/ bionic main' | sudo tee /etc/apt/sources.list.d/kitware.list >/dev/null\n$ sudo apt-get update\n\n$ sudo apt-get install clang libsqlite3-dev pkg-config libssl-dev cmake\n")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"CentOS 7 / RHEL:")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"$ sudo yum install epel-release\n$ sudo yum install clang gcc gcc-c++ openssl-devel cmake3 wget\n\n# This may fail if you have installed cmake with version 2.8.\n# You can choose to uninstall cmake first.\n$ sudo ln -s /usr/bin/cmake3 /usr/bin/cmake\n\n# The official sqlite version on CentOS 7 is 3.7.17, so we need to install the latest version from the source code.\n# The source code have be downloaded from https://www.sqlite.org/download.html\n$ wget https://www.sqlite.org/2020/sqlite-autoconf-3320100.tar.gz\n$ tar xfvz sqlite-autoconf-3320100.tar.gz\n$ cd sqlite-autoconf-3320100\n$ ./configure\n$ make\n$ sudo make install\n")),Object(l.b)("h3",{id:"osx"},"OSX"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"$ curl https://sh.rustup.rs -sSf | sh\n$ rustup install 1.68.0\n")),Object(l.b)("p",null,"You might need to install ",Object(l.b)("inlineCode",{parentName:"p"},"brew")," if you need to use it to install ",Object(l.b)("inlineCode",{parentName:"p"},"clang"),":"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},'$ /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"\n')),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"clang")," comes with Xcode command line tools, and can also be installed with homebrew:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"$ brew install llvm\n")),Object(l.b)("p",null,"You also need to install other dependencies with homebrew and set up the environment variables as described after the installation:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"$ brew install openssl pkg-config cmake\n")),Object(l.b)("h3",{id:"windows"},"Windows"),Object(l.b)("p",null,"For some compatibility issues of ",Object(l.b)("inlineCode",{parentName:"p"},"rocksdb"),", we'll need Visual Studio 15 2017 installed (",Object(l.b)("a",{parentName:"p",href:"https://visualstudio.microsoft.com/thank-you-downloading-visual-studio/?sku=Community&rel=15"},"installer link"),")."),Object(l.b)("p",null,"Download and run the ",Object(l.b)("inlineCode",{parentName:"p"},"rustup")," installer from ",Object(l.b)("a",{parentName:"p",href:"https://static.rust-lang.org/rustup/dist/x86_64-pc-windows-msvc/rustup-init.exe"},"this link"),". It will also has a prompt where you can choose to install a community version. Following the installer you will have tool chain version ",Object(l.b)("inlineCode",{parentName:"p"},"stable-x86_64-pc-windows-msvc")," installed and the environment variable ",Object(l.b)("inlineCode",{parentName:"p"},"PATH")," updated."),Object(l.b)("p",null,"You also need to have ",Object(l.b)("inlineCode",{parentName:"p"},"git"),", ",Object(l.b)("inlineCode",{parentName:"p"},"cmake"),", ",Object(l.b)("inlineCode",{parentName:"p"},"openssl"),", and ",Object(l.b)("inlineCode",{parentName:"p"},"clang")," installed. ",Object(l.b)("inlineCode",{parentName:"p"},"git")," can be downloaded from ",Object(l.b)("a",{parentName:"p",href:"https://git-scm.com/download/win"},"Git for Windows"),", and ",Object(l.b)("inlineCode",{parentName:"p"},"cmake")," can be downloaded from ",Object(l.b)("a",{parentName:"p",href:"https://github.com/Kitware/CMake/releases/download/v3.25.2/cmake-3.25.2-windows-x86_64.msi"},"cmake-3.25.2"),". ",Object(l.b)("inlineCode",{parentName:"p"},"clang")," can be installed with LLVM. Pre-built binaries can be downloaded from ",Object(l.b)("a",{parentName:"p",href:"https://github.com/llvm/llvm-project/releases/download/llvmorg-15.0.7/LLVM-15.0.7-win64.exe"},"Download LLVM"),". Make sure to choose to add ",Object(l.b)("inlineCode",{parentName:"p"},"LLVM")," and ",Object(l.b)("inlineCode",{parentName:"p"},"cmake")," to the system PATH during the installation process. ",Object(l.b)("inlineCode",{parentName:"p"},"openssl")," can be downloaded from ",Object(l.b)("a",{parentName:"p",href:"https://slproweb.com/download/Win64OpenSSL-3_0_8.exe"},"Win64 OpenSSL v3.0.8"),". Make sure to choose to copy the OpenSSL DLL to the Windows system directory. And you also need to set the environment variable ",Object(l.b)("inlineCode",{parentName:"p"},"OPENSSL_DIR")," to the installation directory, which by default is ",Object(l.b)("inlineCode",{parentName:"p"},"C:\\Program Files\\OpenSSL-Win64"),"."),Object(l.b)("p",null,"Make sure that these binaries are in your ",Object(l.b)("inlineCode",{parentName:"p"},"PATH")," (the instruction will be shown after installing ",Object(l.b)("inlineCode",{parentName:"p"},"rustup"),"). After that, you should be able to build Conflux from source."),Object(l.b)("h2",{id:"build-from-source-code"},"Build from Source Code"),Object(l.b)("p",null,"After installing the dependencies mentioned above, now you can clone our repository and start building the executable binary:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"# download Conflux code\n$ git clone https://github.com/Conflux-Chain/conflux-rust\n$ cd conflux-rust\n# Check latest release version at https://github.com/Conflux-Chain/conflux-rust/releases\n$ git checkout v2.x.x\n\n\n# build in release mode\n$ cargo build --release\n")),Object(l.b)("p",null,"This produces an executable in the ",Object(l.b)("inlineCode",{parentName:"p"},"./target/release")," subdirectory."),Object(l.b)("p",null,"Note, when compiling a crate and you receive errors, it's in most cases your\noutdated version of Rust, or some of your crates have to be recompiled.\nCleaning the repository will most likely solve the issue if you are on the\nlatest stable version of Rust, try:"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"$ cargo clean && cargo update\n")),Object(l.b)("p",null,"To start running a Conflux full node, you can follow the instructions at ",Object(l.b)("a",{parentName:"p",href:"/conflux-doc/docs/get_started#running-conflux-full-node"},"Running Conflux Full Node"),"."),Object(l.b)("h2",{id:"install-test-dependencies"},"Install Test Dependencies"),Object(l.b)("p",null,"We have a test framework written in Python3 (version>=3.6). Required packages can be installed by running"),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre",className:"language-bash"},"$ ./dev-support/dep_pip3.sh\n")),Object(l.b)("p",null,"Solidity compiler ",Object(l.b)("inlineCode",{parentName:"p"},"solc")," is also required, and be installed as follows:"),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Ubuntu")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"$ sudo add-apt-repository ppa:ethereum/ethereum\n$ sudo apt-get update\n$ sudo apt-get install solc\n")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"OSX")),Object(l.b)("pre",null,Object(l.b)("code",{parentName:"pre"},"$ brew update\n$ brew upgrade\n$ brew tap ethereum/ethereum\n$ brew install solidity\n")),Object(l.b)("ul",null,Object(l.b)("li",{parentName:"ul"},"Others")),Object(l.b)("p",null,"You can follow the detailed instructions at ",Object(l.b)("a",{parentName:"p",href:"https://solidity.readthedocs.io/en/v0.5.7/installing-solidity.html#binary-packages"},"Installing the Solidity Compiler"),"."),Object(l.b)("p",null,"Note that latest solidity compiler may be incompatible with Conflux and may cause the integration test to fail. If you encounter such problem, please install solidity compiler version 0.5.2."),Object(l.b)("p",null,"To run tests, you can build the source code first and follow the instructions at ",Object(l.b)("a",{parentName:"p",href:"/conflux-doc/docs/get_started#running-test"},"Running Test"),"."))}u.isMDXComponent=!0},191:function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return m}));var o=n(0),a=n.n(o);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},l=Object.keys(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(o=0;o<l.length;o++)n=l[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=a.a.createContext({}),u=function(e){var t=a.a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},d=function(e){var t=u(e.components);return a.a.createElement(c.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},p=a.a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,l=e.originalType,r=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=u(n),p=o,m=d["".concat(r,".").concat(p)]||d[p]||b[p]||l;return n?a.a.createElement(m,i(i({ref:t},c),{},{components:n})):a.a.createElement(m,i({ref:t},c))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var l=n.length,r=new Array(l);r[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:o,r[1]=i;for(var c=2;c<l;c++)r[c]=n[c];return a.a.createElement.apply(null,r)}return a.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"}}]);